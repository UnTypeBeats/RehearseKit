# RehearseKit TrueNAS SCALE Environment Configuration
# Copy this file to .env and fill in your values

# ============================================
# Docker Registry Configuration
# ============================================
DOCKER_REGISTRY=docker.io
DOCKER_USERNAME=your-dockerhub-username
IMAGE_TAG=latest

# ============================================
# Network Configuration
# ============================================
# Your TrueNAS server IP address
TRUENAS_IP=192.168.1.100

# Port mappings (adjust if ports are already in use)
FRONTEND_PORT=3000
BACKEND_PORT=8000
WEBSOCKET_PORT=8001
REDIS_PORT=6379

# ============================================
# Database Configuration (Existing PostgreSQL)
# ============================================
# Connection string to your existing TrueNAS PostgreSQL database
# Format: postgresql+asyncpg://username:password@host:port/database
DATABASE_URL=postgresql+asyncpg://rehearsekit:YOUR_PASSWORD@192.168.1.100:5432/rehearsekit

# ============================================
# Application URLs
# ============================================
# Backend API URL (accessible from frontend)
API_URL=http://192.168.1.100:8000

# WebSocket URL (accessible from frontend browser)
WS_URL=ws://192.168.1.100:8001

# ============================================
# Storage Paths (TrueNAS Datasets)
# ============================================
# Main storage path for audio files
# This should be a TrueNAS dataset, e.g., /mnt/tank/apps/rehearsekit/storage
STORAGE_PATH=/mnt/tank/apps/rehearsekit/storage

# Redis data persistence path
REDIS_DATA_PATH=/mnt/tank/apps/rehearsekit/redis

# ============================================
# Optional: SSL/TLS Configuration
# ============================================
# If using nginx reverse proxy with HTTPS
# SSL_CERT_PATH=/mnt/tank/apps/rehearsekit/certs

# ============================================
# Optional: CORS Origins
# ============================================
# Add your domain if accessing from external network
# CORS_ORIGINS=http://localhost:3000,http://192.168.1.100:3000,https://rehearsekit.yourdomain.com

# ============================================
# Application Settings
# ============================================
# Job retention period (days)
JOB_RETENTION_DAYS=7

# ============================================
# Notes
# ============================================
# 1. Create TrueNAS datasets before deployment:
#    - /mnt/tank/apps/rehearsekit/storage
#    - /mnt/tank/apps/rehearsekit/redis
#
# 2. Create PostgreSQL database and user:
#    psql -U postgres
#    CREATE DATABASE rehearsekit;
#    CREATE USER rehearsekit WITH PASSWORD 'YOUR_PASSWORD';
#    GRANT ALL PRIVILEGES ON DATABASE rehearsekit TO rehearsekit;
#
# 3. Set appropriate permissions on datasets:
#    chown -R 1000:1000 /mnt/tank/apps/rehearsekit/storage
#    chown -R 999:999 /mnt/tank/apps/rehearsekit/redis
#
# 4. Build and push Docker images before deployment:
#    See docs/truenas-deployment.md for instructions

